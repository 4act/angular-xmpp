<!DOCTYPE html>
<html ng-app="MyApp">
<head>
<meta charset="utf-8"/>
<script src="scripts/primus.js" type="text/javascript"></script>
<script data-require="angular.js@*" data-semver="1.3.7" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.7/angular.js"></script>
<script data-require="underscore.js@*" data-semver="1.6.0" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.1.2/angular-strap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular-strap/2.1.2/angular-strap.tpl.min.js"></script>
<script src="//code.angularjs.org/1.3.8/angular-animate.min.js" data-semver="1.3.8"></script>
<script src="//code.angularjs.org/1.3.8/angular-sanitize.min.js" data-semver="1.3.8"></script>
<script src="https://cdn.rawgit.com/Luegg/angularjs-scroll-glue/v2.0.2/src/scrollglue.js"></script>


<link rel="stylesheet" href="css/style.css">
<link rel="stylesheet" href="css/buddycloud.css">
<script src="directives/buddycloud/module.js"></script>
<script src="js/script.js"></script>
</head>
<body ng-controller="pagecontroller">
<div  ng-show="jid" class="header">
<div ng-click="open({name:'',node:'recent'})" class="logo">Logo</div>
<span class="glyphicon glyphicon-inbox" aria-hidden="true"></span>
<span ng-show="unreadmessages">({{unreadmessages}})</span>
&#160;
<span class="glyphicon glyphicon-user" aria-hidden="true"></span>
&#160;
&#160;
{{jid.user}}@{{jid.domain}}
<img  ng-src="icons/avatars/{{jid.user}}.png" style="width:30px;margin:5px;" />
</div>


<div class="leftcol">
<img  ng-if="selectednode.name" ng-src="icons/avatars/{{selectednode.name}}.png" style="width:140px;margin:5px;" />
<div style="font-size:7px">{{selectednode.node}}</div>
<h4>Buddycloud nodes</h4>
<div ng-repeat="node in nodes" ng-click="open(node)" class="menu" ng-class="{'selected':selectednode.node==node.node}">
{{node.name}}
</div>
</div>

<div id="buddycloud" >
<buddycloud ng-if="selectednode.node"  node="{{selectednode.node}}" changenode="open(node)" jid="jid"></buddycloud>
</div>


<div  ng-controller="Roster">

<form class="loginform" ng-show="!connected" ng-submit="login()">
<table>
<tr><td>username</td><td><input ng-model="username"/></td></tr>
<tr><td>password</td><td><input type="password" ng-model="password"/></td></tr>
<tr><td>register</td><td><input type="checkbox" ng-model="register"/></td></tr>
<tr><td></td><td><input ng-if="connection_open" type="submit" value="login"/></td></tr>
</table>
<hr/>
u:eva,arni,seppl,maria,bill<br/>
p:bbb
</form>







<div class="roster" ng-show="connected">
<table >
<tr ng-if="user.presence" ng-repeat="user in roster" ng-click="open(user)">
<td>
<img ng-src="icons/avatars/{{user.name}}.png" style="height:40px"/>
</td>
<td>
<p>{{user.name}}</p>
{{user.presence.status}}
</td></tr></table>
<h4>Add JID</h4>
<form ng-submit="addjid()">
<input ng-model="newjid"/>
</form>
<h4>Friend requests</h4>
<table >
<tr ng-if="user.subscription=='none' || user.subscription=='from'" ng-repeat="user in roster" ng-click="allow(user)"><td>
<img ng-src="icons/avatars/{{user.name}}.png" style="height:40px"/>
</td>
<td>
<p>{{user.name}}</p>
{{user.presence.status}}
</td></tr></table>
</div>


<div id="bottomchat" >
  <div class="minichat" ng-if="user.opened" ng-repeat="user in roster" title="{{ user.name }}"  >
    <div ng-if="user.opened=='max'">
        <div class="title" ng-click="minify(user)"><p>{{user.name}}</p><span class="close" ng-click="close(user)">×</span></div>
            <div class="messages" scroll-glue>
                <div ng-repeat="message in user.messages" >
                <img ng-if="message.from" ng-src="icons/avatars/{{message.from.user}}.png" />
                <img ng-if="!message.from" ng-src="icons/avatars/{{username}}.png" />
                {{message.content}}
                </div>
            <div id="bottom_{{user.name}}"> </div>
            </div>

        <form ng-submit="send(user,$event)">
        <input ng-model="user.newtext"/>
        </form>
      </div>
    <div ng-if="user.opened=='min'" ng-click="open(user)" class="min">
    {{user.name}}<span class="close" ng-click="close(user)">×</span>
    </div>
    </div>
</div>



</div>

</body>

</html>
